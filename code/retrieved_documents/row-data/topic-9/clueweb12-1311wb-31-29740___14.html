<!doctype html>
<meta charset="utf-8">
<title>Is LINUX the answer?</title>
<body>

<h1>Compatible Support Forums: Is LINUX the answer?</h1> 
<p>Jump to content</p> <br>
Sign In &raquo; <br>
 New user? Register Now!  Help
<br> Search 
<ul> 
<li><strong>Search section:</strong></li> 
<li> <strong>This topic</strong></li> 
<li> <strong>This forum</strong></li> 
<li>Forums</li> 
<li>Members</li> 
<li>Help</li> </ul> Advanced <br>
<br>

<ul> 
<li>Forums</li> 
<li>Members</li> 
<li>NT Compatible</li> 
<li>Linux Compatible</li> 
<li>Mac OS Compatible</li> </ul> 
<ul> 
<li>Compatible Support Forums</li> 
<li>&gt; Linux</li> 
<li>&gt; Linux Security</li> </ul> 
<ul> 
<li>View New Content</li> 
<li></li> </ul> Page 1 of 1 
<ul> 
<li>You cannot start a new topic</li> 
<li>You cannot reply to this topic</li> </ul> 
<h2>  Is LINUX the answer? </h2> 
<h3> #1  &nbsp; gewitty&nbsp; </h3> 
<ul> 
<li></li> 
<li>stranger</li> </ul> 
<ul> </ul> 
<ul> 
<li> Group: Members </li> 
<li> Posts: 2 </li> 
<li> Joined: 30-April 04 </li> </ul> 
<p> Posted 30 April 2004 - 11:50 AM </p> I have a small home network, 
consisting of two desktops and a laptop (all running WIN XP Pro). The network 
runs both Ethernet and wireless. One of the desktops is dedicated to running 
just ZoneAlarm, AVG, SpyBot and a mailserver (MailTraq). This machine is also 
the primary connection to my DSL broadband service.<br>
<br>
Given the 
considerable rise in the number of virus and trojan attacks on Windows that are 
happening lately, I am wondering if the primary machine would be safer running 
under LINUX. Not having had any experience of this OS, I don't know if this is 
a good idea or, if so, which version of LINUX would be best. I also don't know 
if ZoneAlarm, AVG and Mailtraq will run on LINUX.<br>
<br>
Anyone got any 
advice please?<br>
 0 <br>

<ul> 
<li>Back to top of the page up there ^</li> </ul> <br>

<h3> #2  &nbsp; iamroot&nbsp; </h3> 
<ul> 
<li></li> 
<li>addict</li> </ul> 
<ul> </ul> 
<ul> 
<li> Group: Members </li> 
<li> Posts: 501 </li> 
<li> Joined: 06-April 04 </li> </ul> 
<p> Posted 30 April 2004 - 01:15 PM </p> Linux will definitely be more stable 
and safe than windows xp. Frankly, I've had horrible experiences with win xp. 
Personally, I prefer Red Hat Linux but its really up to you. Mandrake and SuSe 
are not bad as well. But a note of advice. If you intend to have a dual boot 
system with win xp/2000 and linux, dun try to access ntfs partitions from linux 
as it is dangerous. As for your applications, i don't think that those work on 
linux unless u use wine(sort of an emulator) but im sure you can find 
alternatives on the net.<br>
 0 <br>

<ul> 
<li>Back to top of the page up there ^</li> </ul> <br>

<h3> #3  &nbsp; Dapper Dan&nbsp; </h3> 
<ul> 
<li></li> 
<li>Pooh-Bah</li> 
<li> </li> </ul> 
<ul> </ul> 
<ul> 
<li> Group: Moderators </li> 
<li> Posts: 1703 </li> 
<li> Joined: 27-September 03 </li> </ul> 
<p> Posted 30 April 2004 - 03:26 PM </p> I've never used it, but I know 
someone who has, plus I've seen a lot of positive remarks aboutSmoothwall on 
the net. Linux will certainly be a better server choice for you, but hopefully 
you are a computer enthusiast and will take on the challenge. Be prepared to 
research and learn because Linux is challenging. If you prevail, you will be 
greatly rewarded in the end!<br>
<br>
Iamroot, I personally have not been aware 
of problems associated with just accessing NTFS partitions with Linux, and 
never had any problems reading Windows partitions back in my dual booting days. 
I do however understand there can be problems associated with writing to NTFS 
from Linux with some of the apps that are working toward that end, but I've 
never tried any of these. <br>
 0 <br>

<ul> 
<li>Back to top of the page up there ^</li> </ul> <br>

<h3> #4  &nbsp; blackpage&nbsp; </h3> 
<ul> 
<li></li> 
<li>member</li> </ul> 
<ul> </ul> 
<ul> 
<li> Group: Members </li> 
<li> Posts: 120 </li> 
<li> Joined: 23-March 04 </li> </ul> 
<p> Posted 30 April 2004 - 04:49 PM </p> howdy gwitty, <br>
<br>
a response to 
your question is probably twofolded ...<br>
<br>
You are thinking about 
advancing in the right direction, driven by your security concerns. Things will 
probably only get worse in the future on the Windows-side of the internet. So 
any decision towards using Linux to harden your 
gateway/router/mailserver-machine is more than just agreeable.<br>
<br>
On the 
other hand ...<br>
You are about to enter the Linux-domain from the 
&quot;server-side&quot;, and this can give you a lot of headaches if you lack a 
certain amount of necessary endurance as DapperDan has already mentioned.<br>

<br>As none of the progs you've mentioned is available under Linux you may want 
to take a brief look at what it would take (software- and effort-wise) to 
ensure the same functionality on your Desktop-machine as you now have ...<br>

<br> Firewall <br>
Every contemporary Linux comes with a FW-module built into 
the &quot;kernel&quot; (the system-nucleus, so to say). This FW's called
&quot;iptables&quot; and is one spifftastomatic, a**kickin' piece of 
security-software. There's literally no TCP/IP-issue that you could not catch 
with a specific IPTABLES-rule.<br>
<br>
Many distros access IPTABLES through 
GUI-frontends that let you define those rules more easily (Smoothwall has been 
mentioned, and there are many more frontends, likeFireStarter or 
Firewall-Builder). <br>
<br>
INet-Connection Sharing (NAT) <br>
This specific 
thing is also handled by iptables (the NAT-capabilities of this module 
respectively). Many of the above mentioned GUI-frontends will aid you in 
defining the needed filter-rules for this.<br>
<br>
Many more things from this 
field can be achieved with iptables or additional apps. If you want to e.g. add 
a proxie too you may want to check outSquid, to just name a polular one. <br>

<br> Email-Stuff <br>
This will be by far the most trickiest thing to set up. I 
dunno due to what Linux-tradition this is, but setting up a spam- and 
virus-filtering, mail-forwarding server can drive you nuts. Most distros come 
with the &quot;regular&quot; mail-mangling-progs likesendmail/fetchmail. I 
cannot really recommend the sendmail/fetchmail-couple for two reasons: (a) The 
sometimes really hideous config-file structure and (b) the security issues that 
sendmail has. Of course, the basic sendmail/fetchmail-couple will not filter 
anything (but it would forward mails to the right accounts, given that a lot of 
things are set up properly (likealiases, permissions etc.)). <br>
<br>
To make 
spam- and virus-filtering happen you have to &quot;daisy-chain&quot; multiple 
apps. You will need anMTA (Mail Transport Agent) like EXIM or QMAIL, a 
spamfilter (is there anything else butSPAMASSASIN?  and a virus-filter (e.g 
CLAMAV which we use for our mail-servers). <br>
<br>
As you can see there are a 
lot of apps and things involved and most definitely an even basic setup with 
minimum-functionality will take you up to several days if you haven't laid 
hands on Linux so far.<br>
<br>
But the gain is indeed immense: If you decide 
to go all the way and maybe even tweak/harden your box you will have a halluva 
bullet-proof and reliable machine that will let you forget about things like 
&quot;reboot&quot; and which will be &quot;99% immortal&quot; (unless you pull 
the plug)<br>
<br>
hope this helps <br>
 0 <br>

<ul> 
<li>Back to top of the page up there ^</li> </ul> <br>

<h3> #5  &nbsp; jimf43&nbsp; </h3> 
<ul> 
<li></li> 
<li>enthusiast</li> </ul> 
<ul> </ul> 
<ul> 
<li> Group: Members </li> 
<li> Posts: 397 </li> 
<li> Joined: 13-October 01 </li> </ul> 
<p> Posted 30 April 2004 - 09:39 PM </p> You don't just 'jump into' Linux. I 
think you would be wise to create a dual Boot so that you can begin to 'learn' 
if Linux is a viable solution for you. I have a similar setup. 1 desktop w/dual 
boot W2K &amp; Debian, 1 desktop w/w2k and XP on the laptop.<br>
<br>
I like 
Linux a great deal. It's a very interesting and powerful system which is being 
developed at a breakneck pace and has vast potential. It is also still an 
'expert' system. You really have to have more than average experience, 
understanding and ability to deal with hardware and OS in general.<br>
<br>
I'm 
an Engineer with Administration experience in everything from DOS through OS/2 
and XP. I've been using Linux for about 3 years ... seriously for the last 
year, and, There is no way that I would use Linux for my main system at this 
point in time.<br>
<br>
M$ phobia aside, I certainly 'would not' recommend that 
you switch from a system that you are familiar with, and, appear to have 
entirely under control to one that you don't know and that will require 
'considerable' effort to learn well. You are taking all of the appropriate 
security measures and I simply don't see any immediate benefit to you.<br>
<br>

Many in this forum may not like this answer, but it's the current reality.<br>
 
0 <br>

<ul> 
<li>Back to top of the page up there ^</li> </ul> <br>

<h3> #6  &nbsp; SoulNothing&nbsp; </h3> 
<ul> 
<li></li> 
<li>enthusiast</li> </ul> 
<ul> </ul> 
<ul> 
<li> Group: Members </li> 
<li> Posts: 309 </li> 
<li> Joined: 24-February 04 </li> </ul> 
<p> Posted 30 April 2004 - 11:11 PM </p> jim43 i agree with you <br>
<br>
i 
use linux for office work and modding but i go back to xp to play games<br>
<br>
<br>so before you install or anything first try a live cd like knoppix <br>

also linux is more challenging to use than xp jim43 is right linux is for two 
type of users either advanced or the ones with free times<br>
im still in high 
school and i help run the network at my shcool and i notice this with xp there 
are two sides too it<br>
A. easy to set up easy to run <br>
B low security, ie 
the viruses mentioned<br>
sure xp is plagued by the virus scene but if you get 
the right apps then you should be fine<br>
<br>
dont install linux before you 
get a picture of what its like i mean i really enjoy it<br>
and while some 
distros can be really advanced some like mandrake are meant to help window 
users get adapted to linux<br>
you have alot of things to think about though 
its a tough choice but i hate to admit it stay with xp it isnt as stable but 
none the less its familiar ground and you dont want something your not familiar 
with to take over now do you id recommend checking out some linux help sites 
see how easy/complicated u think it is and then base your decision on it<br>

<br>linux is a whole new world but it isnt mainstream like xp yet, faster 
development and good software<br>
<br>
another thing is any software you learn 
there is a linux<br>
here are some more sites to check out 
ttp://www.linuxquestions.org/questions/answers.php?action=viewcat&amp;catid=1
<br> http://www.justlinux.com/ <br>
and again before you install boot a live one
<br>  0 <br>

<ul> 
<li>Back to top of the page up there ^</li> </ul> <br>

<h3> #7  &nbsp; gewitty&nbsp; </h3> 
<ul> 
<li></li> 
<li>stranger</li> </ul> 
<ul> </ul> 
<ul> 
<li> Group: Members </li> 
<li> Posts: 2 </li> 
<li> Joined: 30-April 04 </li> </ul> 
<p> Posted 01 May 2004 - 09:45 AM </p> Thanks Dan. I downloaded and installed 
Smoothwall and am so far very impressed. It has many powerful features; the 
installation was fairly straightforward and the user interface and 
documentation are excellent. Had a bit of a problem updating the firmware in my 
ADSL modem, but got that sorted eventually.<br>
 0 <br>

<ul> 
<li>Back to top of the page up there ^</li> </ul> <br>

<h3> #8  &nbsp; iamroot&nbsp; </h3> 
<ul> 
<li></li> 
<li>addict</li> </ul> 
<ul> </ul> 
<ul> 
<li> Group: Members </li> 
<li> Posts: 501 </li> 
<li> Joined: 06-April 04 </li> </ul> 
<p> Posted 01 May 2004 - 04:27 PM </p> I agree with the going back to XP to 
play games part. Although i managed to use wine and winex to play games. Its 
just not worth the trouble and u shld just use a windows OS to do so.<br>
 0 
<br> 
<ul> 
<li>Back to top of the page up there ^</li> </ul> <br>

<h3> #9  &nbsp; Dapper Dan&nbsp; </h3> 
<ul> 
<li></li> 
<li>Pooh-Bah</li> 
<li> </li> </ul> 
<ul> </ul> 
<ul> 
<li> Group: Moderators </li> 
<li> Posts: 1703 </li> 
<li> Joined: 27-September 03 </li> </ul> 
<p> Posted 01 May 2004 - 06:54 PM </p> I understand y'all's points about 
Windows XP, and it's all about choices and what works for you. For me though 
there is the freedom issue. I have 9 computers to maintain, and only one of 
them has a Windows partition. That's so my nephews can play games on my mom's 
computer, and it's Windows 98. Otherwise, all the others are free of Microsoft, 
consequently I feel free! Before, with Windows, I felt like a slave in 
comparison. <br>
 0 <br>

<ul> 
<li>Back to top of the page up there ^</li> </ul> <br>

<h3> #10  &nbsp; jimf43&nbsp; </h3> 
<ul> 
<li></li> 
<li>enthusiast</li> </ul> 
<ul> </ul> 
<ul> 
<li> Group: Members </li> 
<li> Posts: 397 </li> 
<li> Joined: 13-October 01 </li> </ul> 
<p> Posted 01 May 2004 - 08:00 PM </p> And, in your case Dan, You are entirely 
justified. Also, you're more than competent in setting up and running your 
network. I Know you spent considerable effort and time in arriving at that 
solution. I only want people to be aware of that 'necessary' commitment, 
especially if a business' sucess may depend on it.<br>
 0 <br>

<ul> 
<li>Back to top of the page up there ^</li> </ul> <br>

<h3> #11  &nbsp; iamroot&nbsp; </h3> 
<ul> 
<li></li> 
<li>addict</li> </ul> 
<ul> </ul> 
<ul> 
<li> Group: Members </li> 
<li> Posts: 501 </li> 
<li> Joined: 06-April 04 </li> </ul> 
<p> Posted 02 May 2004 - 10:30 AM </p> I think that if one has to use Windows 
it would have to be either win 98SE or Win 2k. Win XP really sucks man.<br>
 0 
<br> 
<ul> 
<li>Back to top of the page up there ^</li> </ul> <br>

<h3> #12  &nbsp; optimus&nbsp; </h3> 
<ul> 
<li></li> 
<li>stranger</li> </ul> 
<ul> </ul> 
<ul> 
<li> Group: Members </li> 
<li> Posts: 3 </li> 
<li> Joined: 10-August 04 </li> </ul> 
<p> Posted 10 August 2004 - 10:01 PM </p> Obviouly Linux is the best option, 
but there are many other things to consider...are you using a your windows box 
for internet sharing or are you using a router...Perhaps it is much easier to 
set up a router and dual boot your sytem with linux so when you are online you 
can always use Linux and when you play games use windows....Windows 2000 is 
better if you opt for windows....root is right XP really sucks.<br>
<br>
you 
can also achieve your internet connection sharing by setting up a Proxy server 
using Linux. something I learned from a very good book:Agustin's Linux Manual 
-Second Edition which is available at http://www.netcontrol.org <br>
<br>
if 
you opt to use a router, you can secure your stations by using IPtables. if you 
need information about IP tables there are many books online that can give you 
ideas of how to configure it...however I recommend you Agustin's Linux Manual 
-Second Edition if you are running or plan to run Mandrake 10.<br>
<br>
There 
is a series (first edition for Mdk 9.0 9.1) of this book for free download 
check it out at google.<br>
<br>
the lates edition tells you about IPtables and 
Proxy server<br>
<br>
good luck <br>
<br>
 0 <br>

<ul> 
<li>Back to top of the page up there ^</li> </ul> <br>

<h3> #13  &nbsp; prakash0106&nbsp; </h3> 
<ul> 
<li></li> 
<li>stranger</li> </ul> 
<ul> </ul> 
<ul> 
<li> Group: Members </li> 
<li> Posts: 19 </li> 
<li> Joined: 04-February 10 </li> </ul> 
<p> Posted 04 February 2010 - 02:30 PM </p> ip chain <br>
<br>
# Red Hat 7.1 
Linux firewall using ipchains<br>
# May, 2001 <br>
# configured by Dennis G. 
Allard and Don Cohen,http://oceanpark.com <br>
# <br>
# Permission to copy is 
granted provided that credit is given<br>
# to the author and whatever HOWTOs 
are used to understand this<br>
# stuff. <br>
# <br>
# No warrenty is implied. 
Use at your own risk!!<br>
<br>
# This web page documents my old ipchains 
firewall. I have<br>
# updated my firewall to use iptable and udpated the 
description<br>
# of my firewall at 
http://oceanpark.com/notes/firewall_example.html. <br>
<br>
# This file is 
/etc/sysconfig/ipchains, intended for<br>
# consumption by the script 
/etc/rc.d/init.d/ipchains,<br>
# which makes use of the script 
/sbin/ipchains-restore.<br>
<br>
# In Red Hat 7.1, the man page for ipchains 
and for<br>
# ipchains-restore does not document the syntax of this <br>
# 
file. I had to read the script to understand better<br>
# what is going on. <br>
<br># The firewall that the Red Hat 7.1 installer set up for me <br>
# in 
response to my request for a high level of security<br>
# was too restrictive. 
And, I couldn't find any GUI tool<br>
# in either GNOME or KDE to reconfigure 
the firewall.<br>
# For example, the KDE menu item for editing my firewall <br>

# showed an empty set of rules even though this file and<br>
# the above 
startup script existed. So I had no confidence<br>
# in the GUI firewall tools, 
resulting in my decision to edit<br>
# this file manually. <br>
<br>
# The 
network<br>
# ----------- <br>
# <br>
# This firewall was running on a gateway 
machine having two<br>
# ethernet interfaces, an external one, eth0, which is 
<br># my DSL connection to my ISP, and an internal one, eth1 <br>
# which is 
assigned to 198.211.65.1, an IP number on my<br>
# class C network. I run a web 
server, DNS server, and<br>
# sendmail on the firewall machine itself. <br>
# 
<br># Using this file in a more complex network would require <br>
# some 
modifications. Particular attention would need to<br>
# be given to using the 
right the IP numbers and interfaces,<br>
# among other things. :-) <br>
<br>
# 
Running this script<br>
# ------------------- <br>
# <br>
# Red Hat 7.1 runs 
/etc/rc.d/init.d/ipchains at system<br>
# startup, which uses this file as 
input. You can<br>
# turn ipchains on and off via chkconfig. See: <br>
# <br>
# 
chkconfig --list | grep ipchains<br>
# <br>
# You can restart the ipchains 
firewall via:<br>
# <br>
# /etc/rc.d/init.d/ipchains restart <br>
# <br>
# A 
good way to show your ipchains rules is with:<br>
# <br>
# ipchains -vnL <br>

<br> <br>
# Preliminaries <br>
# ------------- <br>
# <br>
# To permit machines 
internal to the network to be able to<br>
# send IP packets to the outside 
world, enable IP Forwarding:<br>
# <br>
# echo 1 &gt; 
/proc/sys/net/ipv4/ip_forward<br>
# <br>
# Prevent SYN floods from consuming 
memory resources:<br>
# <br>
# echo 1 &gt; /proc/sys/net/ipv4/tcp_syncookies 
<br># <br>
# I place the above echo commands into /etc/rc.d/rc.local <br>
# so 
that they will be executed at boot time.<br>
<br>
<br>
# The basic idea of this 
firewall<br>
# ------------------------------- <br>
# <br>
# Provide rules that 
are applied in the following order:<br>
# <br>
# ACCEPT all UDP packets for 
certain UDP services<br>
# <br>
# DENY all other UDP packets. <br>
# <br>
# 
ACCEPT SYN packets just for certain TCP services<br>
# SYN packets are 
specified via the -y flag in the input<br>
# rules defined below. Note that 
certain services can be<br>
# further filtered by xinetd. <br>
# <br>
# DENY 
all other TCP SYN packets.<br>
# <br>
# ACCEPT all other TCP packets (the 
default input chain policy.)<br>
# <br>
# In other words, we allow any TCP 
packet through that is part of an<br>
# established TCP connection, but we are 
very selective in just which<br>
# connections we permit to be made to start 
off with. IMPORTANT:<br>
# ipchains is less powerful than iptables since 
iptables, introduced<br>
# in linux kernel 2.4 provides for Stateful Packet 
Inspection. ipchains<br>
# will allow packets in that are not part of an 
existing TCP connection.<br>
# Although such packets will not normally be 
processed by an application,<br>
# they can be used as part of a denial of 
service attack. We recommend<br>
# that you use an iptables firewall, which is 
able to audit connections<br>
# more completely. See: <br>
# <br>
# IPTABLES 
Firewall Example<br>
# <br>
# A brief explanation of SYN packets goes as 
follows. TCP connections<br>
# are initiated via a hand shaking protocol 
between the client and server<br>
# programs at either end of the connection. 
The very first TCP packet<br>
# is sent by the client to the server and is 
called a SYN packet,<br>
# because it has the SYN flag set to 1 in the TCP 
packet header. We<br>
# only allow SYN packets for the specific servers running 
on specific<br>
# ports of specific hosts. Subsequently, we only permit further 
TCP<br>
# packets in that are determined to be part of a connection whose <br>

# initial SYN packet was already accepted and responded to by one of our<br>
# 
servers. By stopping all other packets in their tracks, we limit<br>
# attempts 
to attack our internal network.<br>
# <br>
# There are subtle ways that Denial 
of Service attacks can be performed<br>
# if an attacker is able to somehow 
gain access to a machine inside our<br>
# network or otherwise hijack a 
connection. However, even in such<br>
# cases, current research is leading to 
ways to greatly limit the effect<br>
# of such attacks. For further reading, 
see:http://www.cs3-inc.com/ddos.html. <br>
# <br>
# For detailed background 
reading about iptables, please refer to:<br>
# 
http://www.netfilter.org/documentation/tutorials/blueflux/iptables-tutorial.html
<br># <br>
<br>
<br>
# oceanpark.com firewall rules (using ipchains) <br>
# 
---------------------------------------------<br>
<br>
# Tell ipchains-restore 
what default policies to use...<br>
:input ACCEPT <br>
:forward ACCEPT <br>

:output ACCEPT<br>
<br>
# The above will accept anything not prevented by the 
following rules.<br>
<br>
# Deny any packet coming in on the public internet 
interface eth0<br>
# which has source address of our local network (attempt to 
spoof an<br>
# address which should never come from any place but eth1) or which
<br># claims to be from the reserved local loop network 127.0.0.0. <br>
-A 
input -i eth0 -s 198.211.65.0/24 -j DENY<br>
-A input -i eth0 -s 127.0.0.0/8 -j 
DENY<br>
<br>
# Accept all tcp SYN packets for protocols SMTP, HTTP, and SSH 
<br># Note, SMTP connections are further audited by my SMTP server <br>
-A 
input -s 0/0 -d 198.211.65.1/32 25 -p tcp -y -j ACCEPT<br>
-A input -s 0/0 -d 
0/0 80 -p tcp -y -j ACCEPT<br>
-A input -s 0/0 -d 0/0 22 -p tcp -y -j ACCEPT 
<br> <br>
# If you query remote DNS servers, permit UDP responses from it <br>

# -A input -s &lt;remote DNS server IP&gt; 53 -d 0/0 -p udp -j ACCEPT<br>
<br>

# I had to add the following line to make my DNS server honor requests<br>
# 
from the public internet.<br>
-A input -s 0/0 -d 0/0 53 -p udp -j ACCEPT <br>

<br># Open up IMAP server (see /etc/xinetd.conf for who can use it) <br>
-A 
input -s 0/0 -d 0/0 143 -p tcp -y -j ACCEPT<br>
<br>
# Open up FTP server (see 
/etc/xinetd.conf for who can use it)<br>
-A input -s 0/0 -d 0/0 20 -p tcp -y -j 
ACCEPT<br>
-A input -s 0/0 -d 0/0 21 -p tcp -y -j ACCEPT <br>
<br>
# Allow all 
inputs from the internal and local interfaces<br>
-A input -s 0/0 -d 0/0 -i 
eth1 -j ACCEPT<br>
-A input -s 0/0 -d 0/0 -i lo -j ACCEPT <br>
<br>
# If we 
wanted to use masqueading (can do even for legit internal IPs)<br>
# -A forward 
-s 198.211.65.78 -j MASQ<br>
<br>
# Finally, DENY all connection requests to 
any UDP port not yet provided<br>
# for and all SYN connection requests to any 
TCP port not yet provided<br>
# for. Using DENY instead of REJECT means that no 
'ICMP port<br>
# unreachable' response is sent back to the client attempting to 
<br># connect. I.e., DENY just ignores connection attempts. Hence, use of <br>

# DENY causes UDP connection requests to time out and TCP connection<br>
# 
requests to hang. Hence, using DENY instead of REJECT may have<br>
# the effect 
of frustrating attackers due to increasing the amount of<br>
# time taken to 
probe ports.<br>
<br>
# Note that there is a fundamental difference between UDP 
and TCP<br>
# protocols. With UDP, there is no 'successful connection' response.
<br># With TCP, there is. So an attacking client will be left in the dark <br>

# about whether or not the denied UDP packets arrived and will hang<br>
# 
waiting for a response from denied TCP ports. An attacker will not<br>
# be 
able to immediately tell if UDP connection requests are simply<br>
# taking a 
long time, if there is a problem with connectivity between<br>
# the attacking 
client and the server, or if the packets are being<br>
# ignored. This 
increases the amount of time it takes for an attacker<br>
# to scan all UDP 
ports. Similarly, TCP connection requests to denied<br>
# ports will hang for a 
long time. By using REJECT instead of DENY, you<br>
# would prevent access to a 
port in a more 'polite' manner, but give out<br>
# more information to wannabe 
attackers, since the attacker can positively<br>
# detect that a port is not 
accessible in a small amount of time from<br>
# the 'ICMP pot unreachable' 
response.<br>
<br>
-A input -s 0/0 -d 0/0 -p udp -j DENY <br>
-A input -s 0/0 
-d 0/0 -p tcp -y -j DENY<br>
<br>
# end of firewall rules <br>
 0 <br>

<ul> 
<li>Back to top of the page up there ^</li> </ul> <br>

<h3> #14  &nbsp; prakash0106&nbsp; </h3> 
<ul> 
<li></li> 
<li>stranger</li> </ul> 
<ul> </ul> 
<ul> 
<li> Group: Members </li> 
<li> Posts: 19 </li> 
<li> Joined: 04-February 10 </li> </ul> 
<p> Posted 04 February 2010 - 02:30 PM </p> ip tables <br>
<br>
# Red Hat 
Linux firewall using iptables<br>
# <br>
# Created: October 2002 <br>
# Last 
Revised: August 2006<br>
# <br>
# Authors: Dennis G. Allard 
(allard@oceanpark.com) and Don Cohen (don@isis.cs3-inc.com)<br>
# <br>
# This 
script works on on servers running Red Hat 7.3, 8.0, 9.0, and<br>
# RHEL ES 3 
and 4. Variants of this script are in active use on<br>
# many servers. <br>
# 
<br># No warranty is implied. Use at your own risk!! <br>
<br>
# Using this 
script<br>
# ----------------- <br>
# <br>
# I save this file as 
/etc/sysconfig/iptables-precursor<br>
# and then source it and run 
iptables-save to create<br>
# /etc/sysconfig/iptables, which is an input file 
<br># consumed by the script /etc/rc.d/init.d/iptables, <br>
# which in turn 
makes use of the script /sbin/iptables-restore.<br>
# <br>
# Before mucking 
with setting up iptables, you should<br>
# disconnect the machine from the 
internet. Examine<br>
# and understand the current set of iptables rules <br>
# 
before you reconnect to the internet.<br>
# <br>
# To configure the set of 
iptables rules:<br>
# <br>
# /etc/rc.d/init.d/iptables stop <br>
# source 
/etc/sysconfig/iptables-precursor<br>
# <br>
# To save the current set of 
iptables rules for use at next reboot:<br>
# <br>
# iptables-save &gt; 
/etc/sysconfig/iptables<br>
# <br>
# To dynamically restart iptables after 
modifying /etc/sysconfig/iptables:<br>
# <br>
# /etc/rc.d/init.d/iptables 
restart<br>
# <br>
# Note that /etc/rc.d/init.d/iptables is a script. You can 
read it to<br>
# gain understanding of how iptables uses iptables-restore to 
restore<br>
# iptables firewall rules at reboot. <br>
# <br>
# To examine the 
current set of rules in effect:<br>
# <br>
# /etc/rc.d/init.d/iptables status 
<br># <br>
# However, I prefer to show the current set of rules via: <br>
# <br>
# iptables -nvL -t filter<br>
# iptables -nvL -t nat <br>
# <br>
# or <br>
# 
<br># iptables -vL -t filter <br>
# iptables -vL -t nat <br>
# <br>
# <br>
# To 
configure iptables to be used at next system reboot:<br>
# <br>
# chkconfig 
--add iptables<br>
# <br>
# To see if iptables is currently configured to start 
at boot, do:<br>
# <br>
# chkconfig --list iptables <br>
# <br>
# (You might 
have to do chkconfig --del ipchains to remove ipchains)<br>
# <br>
# The rest 
of this file is derived from my old ipchains script.<br>
# <br>
<br>
# A word 
about routing<br>
# -------------------- <br>
# <br>
# Note that this web page 
does not discuss routing decisions. Routing<br>
# (see the 'ifconfig' and 
'route' commands) decides which interface an<br>
# incoming packet will be 
delivered to, i.e. if a given packet will be<br>
# 'input' to this machine or 
be 'forwarded' to some interface for<br>
# delivery to another machine, say on 
an internal network. You should<br>
# have your routing configured before you 
attempt to configure your<br>
# firewall. <br>
# <br>
# Caveat. DNAT and SNAT 
provide a way for the IPTABLES firewall to modify the<br>
# Destination or 
Source IP addresses of a packet and, in this way, interact<br>
# with routing 
decisions. See section below: 'More about NAT and routing'.<br>
# <br>
<br>
# 
The network<br>
# ----------- <br>
# <br>
# This firewall is running on a 
gateway machine having multiple ethernet<br>
# interfaces, a public one, eth0, 
which is a DSL connection to an ISP,<br>
# and one or more internal ones, 
including eth1, which is assigned to<br>
# 192.168.0.1, an IP number on my 
internal private network. My public<br>
# network has static IP numbers 
depicted below as x.y.z.... Actual<br>
# IP numbers would, of course, be a 
sequence of four octets. For this<br>
# script, I assume that the firewall is 
running on the same machine<br>
# having the interfaces configued with my 
public IPs. For this reason,<br>
# most of the rules below are INPUT rules. 
Were I to route some of my public<br>
# static IP numbers to interfaces on one 
or more machines inside the<br>
# firewall on the internal network, I would 
modify certain rules to be<br>
# FORWARD rules instead of INPUT rules. I show 
some examples below of<br>
# FORWARD rules. Finally, the script is just for a 
single server IP,<br>
# hence all of the &quot;/32&quot; network masks below. A 
more realistic situation<br>
# would involve using IP ranges and their 
corresponding network masks.<br>
# <br>
# The gateway at my ISP is x.y.z.1. I 
run a few web servers on<br>
# x.y.z.w, a DNS server on x.y.z.n, and qmail on 
x.y.z.m.<br>
# <br>
# Using this file in a more complex network would require 
some<br>
# modifications. Particular attention would need to be given to using 
<br># the right the IP numbers and interfaces, among other things. :-) <br>
# 
<br> <br>
# Preliminaries <br>
# ------------- <br>
# <br>
# To permit machines 
internal to the network to be able to<br>
# send IP packets to the outside 
world, enable IP Forwarding:<br>
# <br>
# echo 1 &gt; 
/proc/sys/net/ipv4/ip_forward<br>
# <br>
# Prevent SYN floods from consuming 
memory resources:<br>
# <br>
# echo 1 &gt; /proc/sys/net/ipv4/tcp_syncookies 
<br># <br>
# I place the above echo commands into /etc/rc.d/rc.local <br>
# so 
that they will be executed at boot time.<br>
# <br>
<br>
<br>
# The basic idea 
of this firewall<br>
# ------------------------------- <br>
# <br>
# Provide 
rules that are applied in the following order:<br>
# <br>
# ACCEPT all UDP 
packets for certain UDP services<br>
# <br>
# Currently the only UDP 
connections I accept are to my secure DNS<br>
# server, tinydns. For an 
explanation of why tinydns is secure, see:<br>
# 
http://www.faqts.com/knowledge_base/view.phtml/aid/8739/fid/699. <br>
# <br>
# 
DENY all other UDP packets.<br>
# <br>
# ACCEPT SYN packets just for certain 
TCP services<br>
# <br>
# SYN packets are specified via the -syn flag in the 
input<br>
# rules defined below. Note that certain services can be <br>
# 
further filtered by xinetd.<br>
# <br>
# DENY all other TCP SYN packets. <br>
# 
<br># ACCEPT all other TCP packets that are part of existing connections <br>
# 
<br># DENY all other TCP packets. <br>
# <br>
# In other words, we allow any 
TCP packet through that is part of an<br>
# established TCP connection, but we 
are very selective in just which<br>
# connections we permit to be made to 
start off with.<br>
# <br>
# A brief explanation of SYN packets goes as 
follows. TCP connections<br>
# are initiated via a hand shaking protocol 
between the client and server<br>
# programs at either end of the connection. 
The very first TCP packet<br>
# is sent by the client to the server and is 
called a SYN packet,<br>
# because it has the SYN flag set to 1 in the TCP 
packet header. We<br>
# only allow SYN packets for the specific servers running 
on specific<br>
# ports of specific hosts. Subsequently, we only permit further 
TCP<br>
# packets in that are determined to be part of a connection whose <br>

# initial SYN packet was already accepted and responded to by one of our<br>
# 
servers. This is done via 'Stateful Packet Inspection' provided by the<br>
# 
netfilter functionality added to linux as of kernel 2.4. By stopping all<br>
# 
other packets in their tracks, we limit attempts to attack our internal<br>
# 
network.<br>
# <br>
# There are subtle ways that Denial of Service attacks can 
be performed<br>
# if an attacker is able to somehow gain access to a machine 
inside our<br>
# network or otherwise hijack a connection. However, even in such
<br># cases, current research is leading to ways to greatly limit the effect 
<br># of such attacks. For further reading, see: 
http://www.cs3-inc.com/ddos.html. <br>
# <br>
# For detailed background reading 
about iptables, please refer to:<br>
# 
http://www.netfilter.org/documentation/HOWTO/packet-filtering-HOWTO.html <br>
# 
<br> <br>
<br>
# begin oceanpark.com firewall rules (using iptables) <br>
# 
---------------------------------------------------<br>
<br>
# Here we go... 
<br> <br>
# <br>
# Configure default policies (-P), meaning default rule to 
apply if no<br>
# more specific rule below is applicable. These rules apply if 
a more specific rule below<br>
# is not applicable. Defaults are to DROP 
anything sent to firewall or internal<br>
# network, permit anything going out. 
<br># <br>
iptables -P INPUT DROP <br>
iptables -P FORWARD DROP <br>
iptables 
-P OUTPUT ACCEPT<br>
<br>
# <br>
# Flush (-F) all specific rules <br>
# <br>

iptables -F INPUT<br>
iptables -F FORWARD <br>
iptables -F OUTPUT <br>
iptables 
-F -t nat<br>
<br>
<br>
# The rest of this file contains specific rules that 
are applied in the order<br>
# listed. If none applies, then the above policy 
rules are used.<br>
<br>
# <br>
# Forward all packets from eth1 (internal 
network) to eth0 (the internet).<br>
# <br>
iptables -A FORWARD -i eth1 -o eth0 
-j ACCEPT<br>
<br>
# <br>
# Forward packets that are part of existing and 
related connections from eth0 to eth1.<br>
# <br>
iptables -A FORWARD -i eth0 
-o eth1 -m state --state ESTABLISHED,RELATED -j ACCEPT<br>
<br>
# <br>
# Permit 
packets in to firewall itself that are part of existing and related connections.
<br># <br>
iptables -A INPUT -i eth0 -m state --state ESTABLISHED,RELATED -j 
ACCEPT<br>
<br>
# Note, in the above two rules, a connection becomes 
ESTABLISHED in the<br>
# iptables PREROUTING chain upon receipt of a SYNACK 
packet that is a<br>
# response to a previously sent SYN packet. The SYNACK 
packet itself is<br>
# considered to be part of the established connection, so 
no special<br>
# rule is needed to allow the SYNACK packet itself. <br>
<br>
# 
<br># Allow all inputs to firewall from the internal network and local 
interfaces<br>
# <br>
iptables -A INPUT -i eth1 -s 0/0 -d 0/0 -j ACCEPT <br>

iptables -A INPUT -i lo -s 0/0 -d 0/0 -j ACCEPT<br>
<br>
<br>
# <br>
# Enable 
SNAT functionality on eth0<br>
# <br>
# SNAT (Source NAT) is used to map 
private source IP numbers of<br>
# interfaces on the internal LAN to one of my 
public static IP numbers.<br>
# SNAT performs this mapping when a client 
running on one of the<br>
# internal hosts (x.y.z.c) initiates a TCP connection 
(SYN) through<br>
# eth0. <br>
# <br>
iptables -A POSTROUTING -t nat -s 
192.168.0.0/24 -o eth0 -j SNAT --to-source x.y.z.c<br>
<br>
# <br>
# 
Alternative to SNAT -- MASQUERADE<br>
# <br>
# If your firewall has a dynamic 
IP number because it connects to the<br>
# internet itself via DHCP, then you 
probably cannot predict what the IP<br>
# number is of your firewall's 
interface connected to the internet. In<br>
# this case, you need a rule like 
the following that assigns the (an) IP<br>
# number associated with eth0 to 
outgoing connections without you needing<br>
# to know in advance (at time of 
writing this rule) what that IP number is:<br>
# <br>
# iptables -A POSTROUTING 
-t nat -o eth0 -j MASQUERADE<br>
# <br>
# Note that the above SNAT and 
MASQUERADE rules are applicable<br>
# independent of how a host on the internal 
network is assigned its own<br>
# internal IP number. The host could be 
assigned a static IP number on<br>
# an internal nonpublic network (e.g. 10. or 
192.168.) or it could be<br>
# itself assigned a dynamic IP number from your 
own DHCP server running<br>
# on the firewall, or it could even have a public 
static IP number.<br>
# However, it seems unlikely that one would want to 
assign a public IP<br>
# number to a host and then proceed to hide that number 
from the public.<br>
# <br>
<br>
# <br>
# Deny any packet coming in on the 
public internet interface eth0<br>
# which has a spoofed source address from 
our local networks:<br>
# <br>
iptables -A INPUT -i eth0 -s x.y.z.s/32 -j DROP 
<br>iptables -A INPUT -i eth0 -s x.y.z.c/32 -j DROP <br>
iptables -A INPUT -i 
eth0 -s 192.168.0.0/24 -j DROP<br>
iptables -A INPUT -i eth0 -s 127.0.0.0/8 -j 
DROP<br>
<br>
# <br>
# Accept all tcp SYN packets for protocols SMTP, HTTP, 
HTTPS, and SSH:<br>
# (SMTP connections are further audited by our SMTP server) 
<br># <br>
iptables -A INPUT -p tcp -s 0/0 -d x.y.z.m/32 --destination-port 25 
--syn -j ACCEPT<br>
iptables -A INPUT -p tcp -s 0/0 -d 0/0 --destination-port 
80 --syn -j ACCEPT<br>
iptables -A INPUT -p tcp -s 0/0 -d 0/0 
--destination-port 443 --syn -j ACCEPT<br>
iptables -A INPUT -p tcp -s 0/0 -d 
0/0 --destination-port 22 --syn -j ACCEPT<br>
<br>
# <br>
# Notice that the 
above rules are all INPUT rules. My current network<br>
# does not require me 
to make use of FORWARD rules, since I run all<br>
# publicly accessible servers 
directly on my firewall machine. But I<br>
# promised above in the description 
of my network to give examples of<br>
# rules used when there are servers 
running on machines on the internal<br>
# network. Following are examples of 
FORWARD rules I would use if I ran<br>
# mail, web, and ssh servers on machines 
on the internal network inside<br>
# the firewall. <br>
# <br>
# iptables -A 
FORWARD -p tcp -s 0/0 -d x.y.z.m/32 --destination-port 25 --syn -j ACCEPT<br>
# 
iptables -A FORWARD -p tcp -s 0/0 -d x.y.z.w/32 --destination-port 80 --syn -j 
ACCEPT<br>
# iptables -A FORWARD -p tcp -s 0/0 -d x.y.z.w/32 --destination-port 
443 --syn -j ACCEPT<br>
# iptables -A FORWARD -p tcp -s 0/0 -d 0/0 
--destination-port 22 --syn -j ACCEPT<br>
# <br>
# <br>
# The first three of 
the above four rules would be used if my routing<br>
# delivered packets having 
destination IP x.y.z.m, port 25, or IP<br>
# x.y.z.w, port 80 or 443, to an 
interface connected to my internal<br>
# network (i.e. the packet was being 
FORWARDed). The fourth of the above<br>
# four rules is similar but operates on 
any destination IP, port 22.<br>
# <br>
# The difference between an INPUT rule 
and a FORWARD rule is that an<br>
# INPUT rule applies to packets that are 
'input' to this machine (the<br>
# machine on which these iptables firewall 
rules are installed), whereas<br>
# a FORWARD rule applies to packets that are 
being 'fowarded', i.e. to<br>
# packets that are passing through this machine 
to some other machine,<br>
# such as a machine on my internal network. <br>
# 
<br># If I ran my mail server on an internal machine, I would no longer <br>
# 
need my previous INPUT rule for x.y.z.m and would use the above<br>
# FORWARD 
rule instead.<br>
# <br>
<br>
# <br>
# Begin Caveat, More about NAT and routing 
<br># <br>
# The above talk of routing is independent of the rules defined here.
<br># I.e., routing is determined by ifconfig, route, et. al. I have not <br>
# 
yet seen any very good explanation of how to setup the static routing<br>
# 
table (what you see as output from the `route` command). I will not<br>
# 
attempt to remedy that lacuna at this time. If you know of some<br>
# good 
documenation that completely and accurately explains the<br>
# semantics of the 
ifconfig and route commands, i.e., explains what<br>
# affect each has such 
that I can reliably predict what the output<br>
# of `route` will be after 
executing a sequence of ifconfig and<br>
# route commands, then please do let 
me know.<br>
# <br>
# What *can* be done by IPTABLES rules that has the 'feel' 
of routing is<br>
# DNAT (Destintion NAT) and SNAT (Source NAT). DNAT and SNAT 
rules are,<br>
# respectively, mechnisms to map the incoming destination IP 
number and<br>
# outgoing source IP number to different IP numbers. For 
example, SNAT<br>
# can be used to map an internal source IP number to any one 
of your<br>
# external public IP numbers so that a workstation on your internal 
<br># network will appear to servers on the internet to which it connects to 
<br># have a source IP number equal to the mapped public IP number. <br>
# <br>

# DNAT goes the other way. It is a mechanism used typically to map<br>
# public 
destination IP numbers to internal private IP numbers. (In<br>
# fact, DNAT 
could also map public to public or private to private or<br>
# private to 
public, but that is left as an exercise for the reader).<br>
# So, for example, 
if you run a mail server on a machine configured with<br>
# an internal IP 
number but wish to expose that service to the external<br>
# world via a public 
IP number, DNAT is for you.<br>
# <br>
# Now, DNAT and SNAT are *not* routing 
but can *interact* with routing.<br>
# Routing decides whether a packet is 
going to be INPUT to this machine<br>
# or be FORWARDed to another machine. 
That decision is done by routing.<br>
# Once that decision is made, and only 
then, are the IPTABLES filtering<br>
# rules (FORWARD and INPUT rules) applied 
to a given packet. On the<br>
# other hand DNAT is applied by a PREROUTING rule 
and SNAT by a POSTROUTING<br>
# rule. It is now time for you to read the 
following Packet Filtering<br>
# HOWTO section: <br>
# <br>
# 
http://www.netfilter.org/documentation/HOWTO/packet-filtering-HOWTO-9.html <br>

#<br>
# which states: <br>
# <br>
# It's common to want to do Network Address 
Translation (see the<br>
# NAT HOWTO) and packet filtering. The good news is 
that they mix<br>
# extremely well. [editor- The NAT HOWTO can be found at: <br>
#http://www.netfilter...NAT-HOWTO.html] <br>
# <br>
# You design your packet 
filtering completely *ignoring* any NAT you<br>
# are doing. The sources and 
destinations seen by the packet filter<br>
# will be the `real' sources and 
destinations. For example, if you<br>
# are doing DNAT to send any connections 
to 1.2.3.4 port 80 through<br>
# to 10.1.1.1 port 8080, the packet filter would 
see packets going<br>
# to 10.1.1.1 port 8080 (the real destination), not 
1.2.3.4 port 80.<br>
# Similarly, you can ignore masquerading: packets will 
seem to come<br>
# from their real internal IP addresses (say 10.1.1.1), and 
replies<br>
# will seem to go back there. <br>
# <br>
# <br>
# Hence, 
INPUT/FORWARD rules would operate on destination IP numbers<br>
# *after* a 
DNAT rule is applied. But if you don't have any DNAT rules,<br>
# then 
INPUT/FORWARD would apply to the IP numbers as they are in the<br>
# incoming 
packet.<br>
# <br>
# INPUT or FORWARD would be needed purely depending on 
whether your<br>
# routing would cause the packet to stay on the machine where 
the<br>
# firewall is installed or be forwarded to another machine. THAT <br>
# 
decision is done by routing and *not* by DNAT or SNAT or anything<br>
# else in 
this firewall script.<br>
# <br>
# It is perfectly possible for the machine 
having the firewall to have<br>
# both public and internal IPs configured 
and/or for some packets to be<br>
# INPUT and others to be FORWARDed. <br>
# 
<br># DNAT is done by a PREROUTING rule, so you should think of things as <br>

# proceeding in the following order:<br>
# <br>
# 1. apply PREROUTING DNAT 
rules (if any) to map destination IP<br>
# 2. apply routing decisions (see 
ifconfig et. al.)<br>
# 3a. apply INPUT rules to packets having a destination 
IP on this machine<br>
# 3b. apply FORWARD rules to packets having a 
destination IP elsewhere<br>
# 4. apply POSTROUTING SNAT rules (if any) to map 
source IP<br>
# <br>
# (3a and 3b can be done in either order since they apply 
to a mutually<br>
# exclusive set of packets) <br>
# <br>
# I *think* that's 
correct.<br>
# <br>
# End Caveat, More about NAT and routing <br>
# <br>
<br>

<br># <br>
# Sometimes I run older versions of SSH on port 2200: <br>
# <br>

iptables -A INPUT -p tcp -s 0/0 -d 0/0 --destination-port 2200 --syn -j ACCEPT
<br> <br>
# <br>
# For imapd via stunnel (instead of xinetd-based imapd): <br>
#
<br>iptables -A INPUT -p tcp -s 0/0 -d 0/0 --destination-port 993 --syn -j 
ACCEPT<br>
<br>
# <br>
# For xinetd-based IMAP server (see /etc/xinetd.conf for 
who can use it):<br>
# <br>
#iptables -A INPUT -p tcp -s 0/0 -d 0/0 
--destination-port 143 --syn -j ACCEPT<br>
<br>
# <br>
# For DHCP server: <br>
#
<br>iptables -A INPUT -i eth1 -p tcp --sport 68 --dport 67 -j ACCEPT <br>

iptables -A INPUT -i eth1 -p udp --sport 68 --dport 67 -j ACCEPT<br>
<br>
# <br>
# For LDAP clients:<br>
# <br>
#iptables -A INPUT -p tcp -s 0/0 -d 0/0 
--destination-port 389 -syn -j ACCEPT<br>
#dga- worry about LDAP later (after I 
decode LDAP documentation (-;)<br>
<br>
<br>
# <br>
# DNS queries: <br>
# <br>

# Permit responses from our ISP's DNS server. When a client running on our<br>

# host makes a DNS query, the outgoing query is allowed since we permit all<br>

# outgoing packets. The reply will be a UDP connection back to the high<br>
# 
numbered client port from which the query was made. So we only need to<br>
# 
permit UDP packets from our ISP's DNS servers back to high numbered ports:<br>
#
<br>#iptables -A INPUT -p udp -s &lt;ISP DNS server IP&gt;/32 --source-port 53 
-d 0/0 --destination-port 1024:65535 -j ACCEPT<br>
# <br>
# But since we trust 
our ISP DNS Server not not have been hacked and we may<br>
# not be sure what 
our client IP range is, we loosen this to:<br>
# <br>
iptables -A INPUT -p udp 
-s &lt;ISP DNS server IP&gt;/32 --source-port 53 -d 0/0 -j ACCEPT<br>
<br>
<br>

#<br>
# Running a caching DNS Server <br>
# <br>
# We need to permit querying a 
remote DNS server. Since I am running<br>
# a caching DNS server on x.y.z.d 
that makes requests for DNS lookups<br>
# to external DNS servers, those 
servers send back responses via UDP to<br>
# the high numbered client port on 
x.y.z.d where the caching server listens.<br>
# I could of course increase 
security by running the dns cache on its own<br>
# machine/IP and restricting 
to just that machine/IP.<br>
# <br>
iptables -A INPUT -p udp -s 0/0 
--source-port 53 -d x.y.z.d/32 --destination-port 1024:65535 -j ACCEPT<br>
<br>

<br># <br>
# Running a DNS server (tinydns) <br>
# <br>
# When we run a DNS 
server, we have to accept UDP from anywhere to port 53<br>
# <br>
iptables -A 
INPUT -p udp -s 0/0 -d 0/0 --destination-port 53 -j ACCEPT<br>
<br>
<br>
# <br>

# Running a Master DNS Server to update slave DNS servers<br>
# <br>
# You may 
have your server colocated at an ISP and may arrange to have your<br>
# ISP 
provide your primary and secondary DNS with the ISP DNS servers slaving<br>
# 
off of your master DNS server. This has the advantage of letting you be<br>
# 
in full control of the DNS zone files yet keeping the DNS servers exposed<br>
# 
to the public outside of your network. To achieve this, in addition to<br>
# 
permitting vanilla DNS responses from the ISP DNS serves, you also need<br>
# 
to allow TCP connections from the ISP Master DNS Server:<br>
# <br>
# Allow DNS 
zone transfers via TCP from ISP Master DNS server:<br>
# <br>
# iptables -A 
INPUT -p tcp -s &lt;ISP Master DNS server IP&gt;/32 -d 0/0 --destination-port 
53 --syn -j ACCEPT<br>
<br>
<br>
# <br>
# For some other custom server running 
here listening on port &lt;port number&gt;:<br>
# <br>
iptables -A INPUT -p tcp 
-s 0/0 -d 0/0 --destination-port &lt;port number&gt; --syn -j ACCEPT<br>
<br>
# 
<br># For FTP server, restricted to specific local hosts (and see 
/etc/xinetd.conf):<br>
# (for public file transfers we use scp, sftp, and 
related SSH file transfer tools)<br>
# <br>
iptables -A INPUT -p tcp -s 
x.y.z.s/32 -d 0/0 --destination-port 20 --syn -j ACCEPT<br>
iptables -A INPUT 
-p tcp -s x.y.z.s/32 -d 0/0 --destination-port 21 --syn -j ACCEPT<br>
iptables 
-A INPUT -p tcp -s 127.0.0.1/8 -d 0/0 --destination-port 20 --syn -j ACCEPT<br>

iptables -A INPUT -p tcp -s 127.0.0.1/8 -d 0/0 --destination-port 21 --syn -j 
ACCEPT<br>
<br>
# <br>
# For Samba (smbd and nmbd), restricted to specific 
local client hosts (x.y.z.c):<br>
# <br>
iptables -A INPUT -p tcp -s x.y.z.c/32 
-d x.y.z.s/32 --destination-port 139 --syn -j ACCEPT<br>
iptables -A INPUT -p 
udp -s x.y.z.c/32 -d x.y.z.s/32 --destination-port 137 -j ACCEPT<br>
<br>
# <br>
#Special cable modem rules. I used to have a third ethernet card,<br>
#eth2, 
attached to a separate ISP via a cable modem and used the rules<br>
#shown 
below to cause a specific Windows machine on my internal network<br>

#(192.168.0.128) to send traffic out via DSL and get it back via cable.<br>

#This violates ingres filtering rules but seems to work. It was neat<br>
#since 
my cable modem had higher inbound bandwidth and it permitted<br>
#me to do 
downloads without impacting my DSL inbound bandwidth.<br>
#I no longer have 
that third interface, so no longer use this technique.<br>
# <br>
#iptables -A 
INPUT -i eth2 -s 68.65.209.39/32 -j DROP<br>
#iptables -A INPUT -i eth2 -s 
127.0.0.0/8 -j DROP<br>
#iptables -t nat -A POSTROUTING -s 192.168.0.128/32 -d 
0/0 -j SNAT --to-source 68.65.209.39<br>
<br>
# <br>
# Finally, DENY all 
connection requests to any UDP port not yet provided<br>
# for and all SYN 
connection requests to any TCP port not yet provided<br>
# for. Using DENY 
instead of REJECT means that no 'ICMP port<br>
# unreachable' response is sent 
back to the client attempting to<br>
# connect. I.e., DENY just ignores 
connection attempts. Hence, use of<br>
# DENY causes UDP connection requests to 
time out and TCP connection<br>
# requests to hang. Hence, using DENY instead 
of REJECT may have<br>
# the effect of frustrating attackers due to increasing 
the amount of<br>
# time taken to probe ports. <br>
# <br>
# Note that there is 
a fundamental difference between UDP and TCP<br>
# protocols. With UDP, there 
is no 'successful connection' response.<br>
# With TCP, there is. So an 
attacking client will be left in the dark<br>
# about whether or not the denied 
UDP packets arrived and will hang<br>
# waiting for a response from denied TCP 
ports. An attacker will not<br>
# be able to immediately tell if UDP connection 
requests are simply<br>
# taking a long time, if there is a problem with 
connectivity between<br>
# the attacking client and the server, or if the 
packets are being<br>
# ignored. This increases the amount of time it takes for 
an attacker<br>
# to scan all UDP ports. Similarly, TCP connection requests to 
denied<br>
# ports will hang for a long time. By using REJECT instead of DENY, 
you<br>
# would prevent access to a port in a more 'polite' manner, but give out
<br># more information to wannabe attackers, since the attacker can positively 
<br># detect that a port is not accessible in a small amount of time from <br>

# the 'ICMP port unreachable' response.<br>
<br>
iptables -A INPUT -s 0/0 -d 
0/0 -p udp -j DROP<br>
iptables -A INPUT -s 0/0 -d 0/0 -p tcp --syn -j DROP <br>
<br> <br>
# end oceanpark.com firewall rules (using iptables) <br>
# 
-------------------------------------------------<br>
 0 <br>

<ul> 
<li>Back to top of the page up there ^</li> </ul> <br>
Forum Home CompatDB.org 
&nbsp;&nbsp;|-- CompatDB.org Announcements &nbsp;&nbsp;|-- CompatDB.org 
Feedback &amp; Suggestions Windows NT4/2000/XP/2003/Vista/2008/Home Server/7 
&nbsp;&nbsp;|-- Everything New Technology &nbsp;&nbsp;|-- Legacy OS 
&nbsp;&nbsp;|-- Hardware &nbsp;&nbsp;|-- Software &nbsp;&nbsp;|-- Games 
&nbsp;&nbsp;|-- Networking &nbsp;&nbsp;|-- Customization &amp; Tweaking 
&nbsp;&nbsp;|-- Security Linux &nbsp;&nbsp;|-- Everything Linux &nbsp;&nbsp;|-- 
Linux Hardware &nbsp;&nbsp;|-- Linux Software &nbsp;&nbsp;|-- Linux Games 
&nbsp;&nbsp;|-- Linux Networking &nbsp;&nbsp;|-- Linux Customization &amp; 
Tweaking &nbsp;&nbsp;|-- Linux Security Apple &nbsp;&nbsp;|-- Everything Apple 
Other &nbsp;&nbsp;|-- Upcoming News &nbsp;&nbsp;|-- Slack Space &nbsp;&nbsp;|-- 
Buy, Sell or Trade &nbsp;&nbsp;|-- Feedback <br>

<ul> 
<li>&larr; Previous Topic</li> 
<li><strong>Linux Security</strong></li> 
<li>Next Topic &rarr;</li> </ul> 
<h3>Share this topic:</h3> 
<ul> 
<li></li> 
<li></li> 
<li></li> 
<li></li> 
<li></li> 
<li></li> 
<li></li> 
<li></li> 
<li></li> 
<li></li> </ul> <br>
Page 1 of 1 
<ul> 
<li>You cannot start a new topic</li> 
<li>You cannot reply to this topic</li> </ul> 
<h2> 1 User(s) are reading this topic<br>
0 members, 1 guests, 0 anonymous 
users </h2> <br>

<h3>Delete Post</h3> <strong>Remove From View</strong> 
<p>The post may still be visible to moderators in this topic</p> 
<p>Reason: </p> <strong>Delete From Topic</strong> 
<p>The post will be removed from this topic completely</p> 
<p></p> <br>

<h2>Skin and Language</h2> Theme: IP.Board Mobile compat <br>
Language: 
English (USA) <br>

<h2>Execution Stats</h2> 
<ul> 
<li>Time Now: Apr 06 2012 04:54 AM </li> </ul> 
<ul> 
<li>Back To Top</li> 
<li>Forum Home</li> 
<li>Delete My Cookies</li> 
<li>Mark Board As Read</li> </ul> 
<p> Community Forum Software by IP.Board <br>
Licensed to: Esselbach Internet 
Solutions</p> <br>
<br>

</body>